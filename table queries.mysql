SHOW DATABASE;

SHOW TABLES;

//////////////////////// mark table ////////////////////

CREATE TABLE mark (
  Mark_id VARCHAR(15) NOT NULL,
  student_id VARCHAR(20) NOT NULL,
  course_code VARCHAR(15) NOT NULL,
  exam_id INT NOT NULL,
  Quiz_01 DECIMAL(5,2),
  Quiz_02 DECIMAL(5,2),
  Quiz_03 DECIMAL(5,2),
  Assessment_01 DECIMAL(5,2),
  Mid_Practical DECIMAL(5,2),
  Mid_Theory DECIMAL(5,2),
  Final_Theory DECIMAL(5,2),
  Final_Practical DECIMAL(5,2),
  Type ENUM('Theory', 'Practical', 'Both') NOT NULL,

  PRIMARY KEY( Mark_id),		
  FOREIGN KEY (student_id) REFERENCES student(Registration_No) ON DELETE CASCADE,
  FOREIGN KEY (course_code) REFERENCES course_unit(Course_code) ON DELETE CASCADE,
  FOREIGN KEY (exam_id) REFERENCES exam(Exam_Id) ON DELETE CASCADE
);
UPDATE mark m
JOIN course_unit c
ON m.Course_code =c.Course_code
SET m.Type=c.Type;


//////////////////////////////student result table/////////////////////

CREATE TABLE student_result (
  Result_Id INT NOT NULL AUTO_INCREMENT,
  student_id VARCHAR(20) NOT NULL,
  course_code VARCHAR(15) NOT NULL,
  Semester VARCHAR(20) DEFAULT 'Semester 2',
  CA_marks DECIMAL(5,2),
  Final_Marks DECIMAL(5,2),
  Final_Grade CHAR(15),
  Result_Status ENUM('PASS','FAIL','MC','WH') DEFAULT 'PASS',
  SGPA DECIMAL(5,2),
  CGPA DECIMAL(5,2),

  PRIMARY KEY(Result_Id),
  FOREIGN KEY (student_id) REFERENCES student(Registration_No) ON DELETE CASCADE,
  FOREIGN KEY (course_code) REFERENCES course_unit(Course_code)ON DELETE CASCADE);





